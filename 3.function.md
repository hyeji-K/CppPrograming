# 3. 함수

## 1. 함수의 정의와 호출
### 1-1. 함수의 개념
### 함수란 
- 특정 작업을 수행하는 프로그램 문장들을 하나의 단위로 모아 놓고 이름을 부여한 것
- 함수에 정의된 처리가 필요한 부분에서 호출하여 사용함
    - 매개변수를 통해 함수에서 처리할 데이터(인수)를 전달함
    - 호출된 함수로 이동하여 몸체 블록을 실행함
    - 정해진 처리를 한 후 결괏값을 반환할 수 있음
    - 함수의 실행을 완료하면 호출한 곳으로 복귀함
- C++ 프로그램은 함수를 기본 단위로 하여 구성됨

### 함수 정의 형식
```C++
ReturnType functionName(fParameterList) // 머리부
{                                       // 몸체 블록
    Type1 localVar1;        // 지역변수 선언
    Type2 localVar2;
    ......
    statement1;             // 처리할 작업을 수행하는 문장
    statement2;
    ......
    return returnExpression;    // 결과값을 반환함
}
```
- fParameterList: 인수를 받기 위한 형식 매개변수 선언
- ReturnType: 함수의 결과로 반환하는 값의 자료형
- returnExpression: 함수의 결과로 반환하는 값

### return 명령
- 함수를 마치고 함수를 호출한 곳으로 복귀하는 명령
- 함수 안의 어느 곳이든 복귀를 위해 사용할 수 있음
- returnExpression은 함수 머리부에 선언한 ReturnType과 일치하는 자료형의 수식 또는 묵시적 형 변환이 가능한 자료형의 수식을 사용함
- 반환하는 값이 없는 함수의 ReturnType은 **void**로 선언함
- main 함수에서는 return 명령을 만나지 않은 상태로 함수의 끝에 도달하면 '**return 0;**'을 실행한 것과 같음

### 함수 호출 형식
```C++
functionName(aParameterList);
varName = functionName(aParameterList);
```
- aParameterList: 인수로 전달할 실 매개변수 나열
- 형식1: 반환값 유무에 관계없이 사용 가능함
- ReturnType이 void가 아닌 함수에 사용할 수 있음

### 함수의 순환 호출
- 순환 호출(recursive call): 함수를 정의하는 몸체블록 안에서 **직접 또는 간접적**으로 그 함수를 호출하도록 코드를 작성하는 것
- 순환 호출의 예: 팩토리얼 계산 함수의 순환 호출 구현
```C++
int factorial(int n)
{
    if (n <= 1);
        return 1;
    else 
        return n * factorial(n - 1);
}
```

### 함수의 장점과 단점
- 장점
    - 크고 복잡한 프로그램을 작은 크기의 의미있는 작업 단위로 분할하여 구성 => 간결하고 이해하기 쉬운 프로그램을 만들 수 있음
    - 반복 사용되는 코드의 중복 방지
    - 잘 설계된 함수는 다른 응용에서 재사용할 수 있음
- 단점
    - 함수 호출과 복귀 과정에서 처리 시간이 추가됨 => 매우 효율적으로 동작해야 하는 함수라면 inline 함수로 선언함


## 2. 인수의 전달
### 인수와 매개변수
- 인수(argument): 함수 호출 문장에서 함수에 전달하는 식 (expression)
    - 여러 개의 인수가 있을 경우 컴마(,)로 구분하여 나열함
- 매개변수를 통해 인수를 전달함

| 실 매개변수(actual parameter) | 형식 매개변수(formal parameter) |
| :-:| :-: |
| 함수 호출 문장에서 함수의 형식 매개변수에 전달할 인수 | - 인수를 전달받기 위해 함수에 선언된 매개변수 <br> - 함수 헤더에 매개변수의 자료형과 이름을 선언함 |
| cTemp = FahrToC(**fTemp**) | float FahrToc(**float fahr**) |

### 인수 전달 방식 - 값 호출(call-by-value)
- 실 매개변수의 값을 형식 매개변수에 복사하는 방식
- 형식 매개변수의 값을 변경해도 실 매개변수는 변함 없음
- 값 호출 방식의 장점과 단점
    - 장점: 실 매개변수와 형식 매개변수는 별개의 데이터이므로 불필요한 부작용이 발생하지 않음
    - 단점: 구조체와 같이 많은 양의 데이터로 구성된 인수를 전달할 경우 데이터의 복사량이 많아짐

### 인수 전달 방식 - 참조 호출(call-by-reference)
- 실 매개변수의 참조를 형식 매개변수에 전달하는 방식
- 참조 호출의 용도
    - 함수에서 처리한 결과를 매개변수를 통해 받아 오려는 경우
        - 함수에서 형식 매개변수의 값을 변경하는 것은 실 매개변수의 값을 변경하는 것과 같음
    - 많은 양의 데이터로 구성되는 구조체나 객체와 같은 인수를 함수에 효율적으로 전달하는 경우
        - 형식 매개변수에 복사되는 데이터의 양은 실 매개변수의 크기와 관계없이 일정함
- 참조 호출을 통한 효율적인 인수 전달
    - 많은 양의 데이터로 구성되는 구조체나 객체를 인수로 전달하는 경우 값 호출을 사용하는 것에 비해 참조 호출을 사용하는 것이 효율적임
    - 함수 호출의 효율성을 위해 참조 호출을 하지만 실 매개변수의 값이 변경되는 것을 원하지 않는 경우에는 형식 매개변수에 const 한정어를 지정하여 실 매개변수를 보호

### const 매개변수
- 실 매개변수의 값을 보호하고 싶을 때에는 해당 형식 매개변수를 const로 지정

### 디폴트 인수
- 인수의 디폴트 값을 지정하는 방법: 일반적으로 사용되는 디폴트 값이 있는 인수의 경우 함수를 정의할 때 그 값을 미리 지정할 수 있음
```C++
istream& getline(char* str, int conut, char delimiter='\n');
```
- 주의사항: 디폴트 인수는 인수 중 끝에만 위치할 수 있음


## 3. 함수의 다중정의
### 함수 다중정의의 개념
- 다중정의(overloading)이란 동일한 이름에 대하여 여러 가지 의미를 부여하는 것 
- 함수 다중정의
    - 동일한 이름을 갖는 함수를 여러 개 정의하는 것
    - 동일한 개념의 처리를 여러 가지 데이터나 객체에 대해 각각의 대상에 맞는 처리를 해야 할 경우 사용함
    - 다중정의된 함수의 구분: 인수의 개수 및 자료형
        - 함수의 반환 자료형으로 함수를 구분할 수 없음

```C++
void AddTime(TimeRec& t1, const TimeRec& t2);
void AddTime(TimeRec& t1, int minutes);
```
- 주의사항: 함수를 다중정의할 때에는 모호하게 정의되는 것을 조심하여야 한다.


## 4. inline 함수
### inline 함수란
- 함수 호출 절차를 따르지 않고 함수 호출 위치에 함수의 처리 문장이 삽입되게 번역하도록 선언된 함수
- 함수를 사용함으로써 얻을 수 있는 모듈화의 장점을 살리면서, 함수 호출에 따른 부수적인 처리시간이 생략됨
- 함수 호출 루틴으로부터 함수로 넘어가는 부분의 코드 최적화가 가능해짐 => 매우 빈번히 호출되며 빠른 실행이 요구되는 함수를 inline 함수로 선언하면 성능을 높이는데 도움이 됨
- 주의사항: inline 함수로 선언하더라도 반드시 inline으로 번역되는 것은 아님
- inline 선언을 무시하고 일반 함수로 번역하는 경우
    - 함수가 너무 큰 경우
    - 순환 호출(recursive call)을 하는 경우
    - 프로그램 내에서 그 함수에 대한 포인터를 사용하는 경우